<!DOCTYPE html>
<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properities -->
  <title>Fixed Menu Example - Semantic</title>

  <link rel="stylesheet" type="text/css" href="public/semantic/dist/semantic.min.css">
  <script src="public/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="public/bower_components/jquery-serialize-object/jquery.serialize-object.js"></script>
  <script src="public/semantic/dist/semantic.min.js"></script>
</head>
<body>

<div class="ui fixed inverted menu">
  <div class="ui container">
    <div href="#" class="header item">
      <img src="public/assets/bbc.png" class="ui tiny image"
      style="margin-right: 1em" >
      Discourse
    </div>
    <a href="/" class="item">Home</a>
    <a href="/about" class="item">About</a>
    <a href="/feedback" class="item">Feedback</a>
    <div class="right menu">
      <a class="item" id="login">
        <i class="sign in icon"></i>Login
      </a>
    </div>
  </div>
</div>

<div class="ui main text container"><!-- style="margin-top: 7em"> -->
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>Your feedback is crucial in helping us to improve this service. Please use
  the form below to leave your comments:</p>
  <form class="ui form" id="form">
    <div class="fields">
      <div class="six wide field">
        <label>Name</label>
        <input type="text" name="name" placeholder="(optional)">
      </div>
      <div class="six wide field">
        <label>Email</label>
        <input type="email" name="email" placeholder="(optional)">
      </div>
      <div class="four wide field">
        <label>Type</label>
        <select class="ui dropdown" name="type">
          <option>Feature request</option>
          <option>Bug report</option>
          <option>General comment</option>
        </select>
      </div>
    </div>
    <div class="field">
      <label>Message</label>
      <textarea name="message"></textarea>
    </div>
    <div class="ui success message"></div>
    <div class="ui error message"></div>
    <div class="ui submit button">Send</div>
  </form>
</div>

<script>

  // test for success variable in JSON response
  $.fn.api.settings.successTest = function(response) {
    if(response && response.success) return response.success;
    return false;
  };

  // configure API endpoint
  $.fn.api.settings.api = {
    'feedback': '/feedback'
  };

  // configure form validation
  $('#form')
  .form({
    fields: {
      message: {
        identifier: 'message',
        rules: [{
          type: 'empty',
          prompt: 'Please enter a message'
        }]
      },
      email: {
        identifier: 'email',
        optional: true,
        rules: [{
          type: 'email',
          prompt: 'Please enter a valid email address'
        }]
      }
    }
  })
  // configure form submission
  .api({
    action: 'feedback',
    method: 'POST',
    serializeForm: true,
    onSuccess: function(response) {
      $('.ui.success.message').html('Thank you for your feedback!');
    },
    onFailure: function(response) {
      $('.ui.error.message').html('An error occured.');
    }
  });
</script>

</body>

</html>
